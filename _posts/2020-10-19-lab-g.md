---
layout: post
author: zemin 
category: HCI
demo: true
demo_link: kart_game.mov
---

# Lab G : VR Roll-a-Ball Unity

The last lab in HCI course is to convert the tradictional Roll-a-Ball game to that onto VR platform. We use keyboard to control the movement direction of a ball. In VR environment, we can use our hand to manipulate the table and make the ball move.

## Setup HMD

We will use **Oculus Quest** as the main device in this project. There are a handy tool to test our executable easily called *Oculus Link*. With it, we do not have to build the project, transfer it into headset and run the project. All we need is to hit **Play** in *Unity Editor* and test it with headset. To make it work, we need to install **[Oculus Setup](https://www.oculus.com/setup/)** and follow the steps.

## Editor Setup

In this lab, we will use **VRTK 4** to create controller version and use **Oculus Integration** for hand tracking version. We will firstly download the zip file of *VRTK 4* from its [github page](https://github.com/ExtendRealityLtd/VRTK) and add this project into Unity Editor(2019.4).

&nbsp;

![Alt text](https://raw.githubusercontent.com/zemin-xu/zemin-xu.github.io/master/assets/images/hci_lab3/vrtk_add_project.png "add vrtk"){:width="100%"}

&nbsp;

We will then open it and change the project settings's options by enabling the **Virtual Reality Supported**.

&nbsp;

![Alt text](https://raw.githubusercontent.com/zemin-xu/zemin-xu.github.io/master/assets/images/hci_lab3/project_settings_enable_vr.png "enable vr"){:width="100%"}

&nbsp;

Because my **Oculus Link** work perfectly, so I did not change the build settings as **Android**. If not, we will do so.

&nbsp;

The next step is to go to the **Asset Store** in Editor and import **Oculus Integration**. At the same time, we will open our **Roll-a-Ball** project and export it as a package file. If we do not have this project done, we can also search for it onto **Asset Store** and use the complete project.

&nbsp;

![Alt text](https://raw.githubusercontent.com/zemin-xu/zemin-xu.github.io/master/assets/images/hci_lab3/oculus_integration_import.png "import oculus integration"){:width="100%"}

&nbsp;

There will be conflicts because of some same-name situations in APIs and our projects. For example, I encountered the namespace error for *PlayerController.cs*. We can simply fix it by adding a namespace for Roll-a-Ball's script.

&nbsp;

![Alt text](https://raw.githubusercontent.com/zemin-xu/zemin-xu.github.io/master/assets/images/hci_lab3/add_namespace.png "add namespace"){:width="100%"}

&nbsp;

At this stage, we will have no compile error and we can test the demo in **VRTK 4** to test **Oculus Link**.

&nbsp;

## Composing Scene

The next thing to do is to compose the elements that we need to make a Roll-a-Ball VR game. To do so, we will create a new scene and delete the default camera. The second step is to create a huge floor for VR and add a Cube as a table. We will act as a giant and manipulate the it. We can group them into a empty gameobject call *env*. After that, we will grab into the scene the elements of *Roll-a-Ball* and group it into a same name empty gameobject. All of the sub-elements should at the same child hierarchy.

&nbsp;

![Alt text](https://raw.githubusercontent.com/zemin-xu/zemin-xu.github.io/master/assets/images/hci_lab3/composition_scene.png "composition"){:width="100%"}

&nbsp;

# References
